{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "name": "UK Health Data Assistant",
  "version": "3.1",
  "description": "Conversational AI assistant for discovering and accessing UK health datasets across the federated UK health data ecosystem",
  "category": "health_data_discovery",
  "capabilities": {
    "dataset_discovery": {
      "description": "Find UK health datasets by topic, condition, or data type",
      "input": "natural_language_query",
      "output": "dataset_recommendations_with_access_guidance"
    },
    "access_route_guidance": {
      "description": "Understand TRE/SDE requirements and application processes",
      "input": "dataset_name_or_platform",
      "output": "step_by_step_access_guidance"
    },
    "dataset_comparison": {
      "description": "Compare data sources side-by-side",
      "input": "two_or_more_dataset_names",
      "output": "comparison_table"
    },
    "hdr_gateway_search": {
      "description": "Live search of the HDR UK Health Data Gateway",
      "input": "search_query",
      "output": "gateway_search_results"
    },
    "data_use_register_extraction": {
      "description": "Extract approved research projects from SAIL Databank",
      "input": "none",
      "output": "csv_of_approved_projects"
    }
  },
  "data_sources": [
    {
      "name": "HDR UK Innovation Gateway",
      "url": "https://www.healthdatagateway.org/",
      "type": "discovery_portal",
      "coverage": "UK-wide",
      "description": "Central discovery platform for UK health datasets"
    },
    {
      "name": "CPRD",
      "url": "https://cprd.com/",
      "type": "primary_care_ehr",
      "coverage": "~60M patients",
      "systems": ["EMIS", "Vision"],
      "access_model": "fee_based_application",
      "linkages": ["HES", "ONS", "cancer_registries"]
    },
    {
      "name": "OpenSAFELY",
      "url": "https://www.opensafely.org/",
      "type": "in_situ_analysis",
      "coverage": "~60M patients",
      "systems": ["TPP"],
      "access_model": "code_repository",
      "primary_use": "covid_research",
      "note": "Does not support EMIS or general-purpose research"
    },
    {
      "name": "UK Biobank",
      "url": "https://www.ukbiobank.ac.uk/",
      "type": "cohort_study",
      "coverage": "~500,000 participants",
      "data_types": ["genomics", "imaging", "biomarkers", "EHR_linkage"],
      "access_model": "application_based"
    },
    {
      "name": "SAIL Databank",
      "url": "https://saildatabank.com/",
      "type": "trusted_research_environment",
      "region": "Wales",
      "coverage": "~3.5M population",
      "data_types": ["GP", "hospital", "social_care"],
      "linkages": ["education", "housing"]
    },
    {
      "name": "Research Data Scotland",
      "url": "https://www.researchdata.scot/",
      "type": "safe_haven",
      "region": "Scotland",
      "coverage": "~5.5M population",
      "data_types": ["health", "social_care", "admin"],
      "linkages": ["education", "justice"]
    },
    {
      "name": "Genomics England",
      "url": "https://www.genomicsengland.co.uk/",
      "type": "clinical_genomics",
      "coverage": "~100,000 genomes",
      "focus": ["rare_diseases", "cancer"],
      "access_model": "application_based"
    },
    {
      "name": "NHS England",
      "url": "https://www.england.nhs.uk/",
      "type": "data_custodian",
      "region": "England",
      "note": "Merged with NHS Digital"
    },
    {
      "name": "Our Future Health",
      "url": "https://ourfuturehealth.org.uk/",
      "type": "prevention_cohort",
      "focus": "disease_prevention"
    },
    {
      "name": "BHF Data Science Centre",
      "url": "https://www.bhf.org.uk/what-we-do/our-research/bhf-data-science-centre",
      "type": "research_centre",
      "focus": "cardiovascular_research"
    }
  ],
  "terminology": {
    "TRE": "Trusted Research Environment - secure data access platform",
    "SDE": "Secure Data Environment - interchangeable with TRE",
    "Safe Haven": "Scottish terminology for TRE/SDE",
    "SPE": "Secure Processing Environment - Digital Economy Act terminology"
  },
  "query_patterns": {
    "dataset_discovery": [
      "What datasets exist for {condition}?",
      "Where can I find data on {topic} in {region}?",
      "What primary care data is available for {use_case}?"
    ],
    "access_requirements": [
      "How do I access data through {platform}?",
      "What are the requirements for {TRE}?",
      "Compare access routes for {dataset_a} vs {dataset_b}"
    ],
    "dataset_comparison": [
      "Compare {dataset_a} and {dataset_b}",
      "What's the difference between {dataset_a} and {dataset_b}?",
      "Which dataset is best for {use_case}?"
    ],
    "technical_queries": [
      "Does {platform} support {data_type}?",
      "What linkages are available in {dataset}?",
      "What geographic coverage does {source} provide?"
    ]
  },
  "files": {
    "main_application": "app.py",
    "knowledge_base": "system_prompt_v3_structured.txt",
    "data_extraction": "extract_sail_data_use_register.py",
    "requirements": "requirements.txt",
    "config": ".streamlit/config.toml"
  },
  "api_endpoints": {
    "hdr_gateway": {
      "base_url": "https://api.www.healthdatagateway.org/api/v1",
      "search": "/search",
      "datasets": "/datasets",
      "data_use_register": "/dur"
    },
    "sail_databank": {
      "register_url": "https://saildatabank.com/data/data-use-register/"
    }
  },
  "constraints": [
    "Do not fabricate dataset names or access pathways",
    "Do not speculate about coverage or custodianship without verification",
    "Always recommend verification with official data custodians",
    "OpenSAFELY only supports TPP and COVID-related research"
  ],
  "contact": {
    "issues": "https://github.com/Seymo98/uk-health-data-assistant/issues",
    "hdr_uk": "https://www.hdruk.ac.uk/",
    "gateway": "https://www.healthdatagateway.org/"
  }
}
